<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../styles/main.css" />
    <link rel="icon" href="../assets/images/flores.png" type="image/x-icon" />
    <title>Yellow Flowers</title>
  </head>
  <body class="container">
    <audio
      id="backgroundAudio"
      src="../assets/sounds/floresAmarillas.mp3"
      loop
      preload="auto"
    ></audio>

    <!-- Botón para reproducir audio en móviles -->
    <div id="audioControls" class="audio-controls">
      <button id="playButton" class="play-button">🎵</button>
    </div>

    <script>
      // Detectar si es dispositivo móvil
      const isMobile =
        /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(
          navigator.userAgent
        );

      const audio = document.getElementById("backgroundAudio");
      const playButton = document.getElementById("playButton");
      const audioControls = document.getElementById("audioControls");

      // En escritorio, intentar reproducir automáticamente
      if (!isMobile) {
        audio.play().catch((e) => {
          console.log("Autoplay bloqueado:", e);
          audioControls.style.display = "block";
        });
      } else {
        // En móviles, mostrar el botón de reproducción
        audioControls.style.display = "block";
      }

      // Manejar clic en el botón de reproducción
      playButton.addEventListener("click", () => {
        if (audio.paused) {
          audio
            .play()
            .then(() => {
              playButton.textContent = "🔊";
              audioControls.style.opacity = "0.3";
            })
            .catch((e) => {
              console.log("Error al reproducir:", e);
            });
        } else {
          audio.pause();
          playButton.textContent = "🎵";
        }
      });

      // Ocultar controles después de que el usuario interactúe
      audio.addEventListener("play", () => {
        setTimeout(() => {
          audioControls.style.opacity = "0.3";
        }, 2000);
      });
    </script>
  </body>
</html>
